<h1>Welcome#search</h1>
<% multiplier = { "Economy" => 1, "Business" => 1.5, "First" => 2 } %>
<% passenger_class = @passenger_enquiry["Travel Class"] %>
<% travel_value = multiplier[passenger_class] || 1 %>
<% passenger_class = "Economy" unless travel_value > 1 %>

<%= form_for(:select_flight, :url => {:controller => "bookings", :action => "new"}, :method => "get" ) do |x|%>
<table style="max-width: 100%">
  <thead>
    <tr>
      <th>Origin</th>
      <th>Destination</th>
      <th>Departure Time</th>
      <th>Time of Arrival</th>
      <th>Flight Cost</th>
      <th>Total Cost</th>
      <th>Select a Flight</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>  
    <% @enquire.each do |flight| %>
      <tr>
        <td><%= flight.origin %></td>
        <td><%= flight.destination %></td>
        <td><%= flight.departure.strftime("%d/%m/%Y %H:%M") %></td>
        <td><%= flight.arrival.strftime("%d/%m/%Y %H:%M") %></td>
        <td> $ <%= flight.flight_cost * travel_value %></td>
        <td> $ <%= flight.flight_cost * @passenger_enquiry["Number Travelling"] * travel_value %></td>
        <td>
            <%= label_tag(:select_flight, "#{flight.flight_code}") %> 
            <%= radio_button_tag(:select_flight, "#{flight.id}") %> 
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<p><%= submit_tag("Select Flight") %></p>
<% end %>

<p>Passengers Travelling: <%= @passenger_enquiry["Number Travelling"] %></p>
<p><%= "Travel Class: #{passenger_class} Class" %></p>
<p><%= "Results found: #{@enquire.count}" %></p>
