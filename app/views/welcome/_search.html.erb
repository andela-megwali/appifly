<% multiplier = { "Economy" => 1, "Business" => 1.5, "First" => 2 } %>
<% passenger_class = @passenger_enquiry[:class_selected] %>
<% travel_value = multiplier[passenger_class] || 1 %>
<% passenger_class = "Economy" unless travel_value > 1 %>

<h3>Available Flights | Search Results</h3>
<%= form_for(:select_flight, :url => {:controller => "bookings", :action => "new"}, :method => "get" ) do |x|%>
  <table class="table">
    <thead>
      <tr>
        <th>Index</th>
        <th>Origin</th>
        <th>Destination</th>
        <th>Departure Time</th>
        <th>Time of Arrival</th>
        <th>Flight Cost</th>
        <th>Total Cost</th>
        <th>Select a Flight</th>
        <th colspan="3"></th>
      </tr>
    </thead>
    <tbody>  
      <% @enquire.each_with_index do |flight, index| %>
        <tr>
          <td><%= index + 1 %></td>
          <td><%= flight.origin %></td>
          <td><%= flight.destination %></td>
          <td><%= flight.departure.strftime("%d/%m/%Y %H:%M") %></td>
          <td><%= flight.arrival.strftime("%d/%m/%Y %H:%M") %></td>
          <td> $ <%= flight.cost * travel_value %></td>
          <td> $ <%= flight.cost * @passenger_enquiry[:number_travelling] * travel_value %></td>
          <td>
              <%= label_tag(:select_flight, "#{flight.code}") %> 
              <%= radio_button_tag(:select_flight, "#{flight.id}") %> 
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<p><%= submit_tag "Select Flight", class: "btn btn-outline btn-xl page-scroll" %></p>
<% end %>

<p>Passengers Travelling: <%= @passenger_enquiry[:number_travelling] %></p>
<p><%= "Travel Class: #{passenger_class} Class" %></p>
<p><%= "Results found: #{@enquire.count}" %></p>
